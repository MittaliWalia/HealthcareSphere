@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@{
    var username = HttpContextAccessor.HttpContext.Session.GetString("Username") ?? "Guest";
    var role = HttpContextAccessor.HttpContext.Session.GetString("Role") ?? "Unknown";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewData["Title"] - Clinic System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
        <a class="navbar-brand" href="#">🏥 Clinic System</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav me-auto">
                @if (role == "Admin")
                {
                    <li class="nav-item"><a class="nav-link" href="/Admin/Dashboard">Admin Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="/Admin/ManageUsers">Manage Users</a></li>
                    <li class="nav-item"><a class="nav-link" href="/Admin/Billing">Billing</a></li>
                }
                else if (role == "Doctor" || role == "Nurse")
                {
                    <li class="nav-item"><a class="nav-link" href="/Staff/Dashboard">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="/Staff/Schedule">Schedule</a></li>
                }
                else if (role == "Patient")
                {
                    <li class="nav-item"><a class="nav-link" href="/Patient/Dashboard">My Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="/Patient/BookAppointment">Book Appointment</a></li>
                    <li class="nav-item"><a class="nav-link" href="/Patient/MyRecords">My Records</a></li>
                    <li class="nav-item"><a class="nav-link" href="/Patient/Billing">Billing</a></li>
                }
            </ul>

            <span class="text-white">Hello, @username (@role)</span>
        </div>
    </nav>

    <main class="container my-4">
        @RenderBody()
    </main>

    <footer class="bg-light text-center py-3 mt-5">
        <small>&copy; 2025 Medical Clinic System</small>
    </footer>
</body>
</html>
